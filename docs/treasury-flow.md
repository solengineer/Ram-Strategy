# ðŸ’° Treasury Flow Diagrams

This document provides detailed visualizations of how funds move through the Ram Strategy ecosystem.

---

## ðŸ“Š High-Level Treasury Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INFLOWS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   DEX Tradingâ”‚      â”‚  RAM Sales   â”‚      â”‚   Donations  â”‚  â”‚
â”‚  â”‚  Creator Feesâ”‚      â”‚   Revenue    â”‚      â”‚  (Optional)  â”‚  â”‚
â”‚  â”‚              â”‚      â”‚              â”‚      â”‚              â”‚  â”‚
â”‚  â”‚   0.5% fee   â”‚      â”‚  Arbitrage   â”‚      â”‚  Community   â”‚  â”‚
â”‚  â”‚   per trade  â”‚      â”‚   Profit     â”‚      â”‚  Support     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                     â”‚                     â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                               â–¼                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â”‚  Treasury Wallet   â”‚                       â”‚
â”‚                    â”‚   (Solana)         â”‚                       â”‚
â”‚                    â”‚                    â”‚                       â”‚
â”‚                    â”‚  Multi-sig 3-of-5  â”‚                       â”‚
â”‚                    â”‚  Address: [PUBKEY] â”‚                       â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                               â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ALLOCATION                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚         â”‚                     â”‚                     â”‚           â”‚
â”‚         â–¼                     â–¼                     â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Operationalâ”‚        â”‚   Trading  â”‚       â”‚  Reserve   â”‚     â”‚
â”‚  â”‚   Buffer   â”‚        â”‚   Capital  â”‚       â”‚    Fund    â”‚     â”‚
â”‚  â”‚            â”‚        â”‚            â”‚       â”‚            â”‚     â”‚
â”‚  â”‚    10%     â”‚        â”‚     70%    â”‚       â”‚     20%    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                              â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXECUTION                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚                                 â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                â–¼                             â–¼                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚     â”‚  Purchase RAM      â”‚         â”‚   Hold Cash for    â”‚      â”‚
â”‚     â”‚  from Marketplaces â”‚         â”‚   Opportunities    â”‚      â”‚
â”‚     â”‚                    â”‚         â”‚                    â”‚      â”‚
â”‚     â”‚  AI Agent Decides  â”‚         â”‚   Earn Yield on    â”‚      â”‚
â”‚     â”‚  What/When to Buy  â”‚         â”‚   DeFi (Future)    â”‚      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚               â”‚                                                 â”‚
â”‚               â–¼                                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚     â”‚  RAM Inventory     â”‚                                      â”‚
â”‚     â”‚  Storage           â”‚                                      â”‚
â”‚     â”‚                    â”‚                                      â”‚
â”‚     â”‚  - Warehouse       â”‚                                      â”‚
â”‚     â”‚  - Tracking DB     â”‚                                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚               â”‚                                                 â”‚
â”‚               â–¼                                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚     â”‚  Resell RAM        â”‚                                      â”‚
â”‚     â”‚  at Higher Price   â”‚                                      â”‚
â”‚     â”‚                    â”‚                                      â”‚
â”‚     â”‚  Target: 15-30%    â”‚                                      â”‚
â”‚     â”‚  Profit Margin     â”‚                                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚               â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OUTFLOWS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚         â–¼                                           â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Reinvest in    â”‚                         â”‚  Token Buyback â”‚  â”‚
â”‚  â”‚ More RAM       â”‚                         â”‚   & Burn       â”‚  â”‚
â”‚  â”‚                â”‚                         â”‚                â”‚  â”‚
â”‚  â”‚ 50% of profit  â”‚                         â”‚ 50% of profit  â”‚  â”‚
â”‚  â”‚                â”‚                         â”‚                â”‚  â”‚
â”‚  â”‚ Compounds      â”‚                         â”‚ Price Support  â”‚  â”‚
â”‚  â”‚ Inventory      â”‚                         â”‚ for $RAM       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Detailed Transaction Flow

### 1. Fee Collection Process

```
User trades $RAM on DEX (e.g., Raydium)
    â”‚
    â”œâ”€> 99.5% â†’ User receives tokens
    â”‚
    â””â”€> 0.5% â†’ Creator Fee
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Fee Collector     â”‚
    â”‚ Smart Contract    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ (Every 1 hour or $100 threshold)
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Treasury Wallet   â”‚
    â”‚ (Multi-sig)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Smart Contract Pseudocode:**
```solidity
// Simplified example
contract FeeCollector {
    address treasury = 0x...;
    uint256 constant FEE_BPS = 50; // 0.5%
    
    function onTokenTransfer(uint256 amount) external {
        uint256 fee = amount * FEE_BPS / 10000;
        token.transfer(treasury, fee);
        emit FeeCollected(fee, block.timestamp);
    }
}
```

---

### 2. Trade Execution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: Opportunity Detection                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Price Monitor scans marketplaces every 5 minutes
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Market Data (Example)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Newegg:  32GB DDR5 @ $120           â”‚
â”‚ eBay:    32GB DDR5 @ $165           â”‚
â”‚ Amazon:  32GB DDR5 @ $155           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Decision Engine calculates:
    Profit = $165 (eBay sell) - $120 (Newegg buy) = $45
    Costs = $8 (shipping) + $5 (fees) + $2 (tax) = $15
    Net = $45 - $15 = $30 (25% margin) âœ…
    
    Confidence Score: 0.85 (based on historical data)
    
    IF net > $20 AND confidence > 0.7:
        RECOMMEND_TRADE()

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: Approval (if > $5k)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Trade Recommendation
        â”‚
        â”œâ”€> If amount < $5,000 â†’ Auto-approve
        â”‚
        â””â”€> If amount â‰¥ $5,000 â†’ Notify multi-sig signers
                â”‚
                â–¼
            3 of 5 signers approve via mobile wallet
                â”‚
                â–¼
            Trade approved âœ…

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Purchase Execution                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Trade Executor initiates purchase
        â”‚
        â–¼
    Transfer USDC from treasury to payment gateway
        â”‚
        â–¼
    API call to Newegg:
        POST /api/orders
        {
            "sku": "N82E16820242729",
            "quantity": 1,
            "payment": "USDC"
        }
        â”‚
        â–¼
    Order Confirmation
        â”‚
        â–¼
    Update inventory database:
        INSERT INTO inventory (sku, cost, date, status)
        VALUES ('N82E16820242729', 120, NOW(), 'pending_delivery')

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Delivery & Listing                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Wait for shipment (3-7 days)
        â”‚
        â–¼
    Tracking API confirms delivery
        â”‚
        â–¼
    Update status: 'pending_delivery' â†’ 'in_stock'
        â”‚
        â–¼
    Auto-list on eBay:
        POST /api/sell
        {
            "title": "32GB DDR5 RAM (Brand New, Sealed)",
            "price": 165,
            "shipping": "calculated"
        }

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Sale & Profit Distribution                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Item sells on eBay
        â”‚
        â–¼
    Funds received: $165
        â”‚
        â–¼
    Calculate profit:
        Gross = $165
        Cost = $120
        Fees = $15
        Net Profit = $30
        â”‚
        â–¼
    Profit Router executes split:
        â”œâ”€> $15 (50%) â†’ RAM Reinvestment Pool
        â””â”€> $15 (50%) â†’ Token Buyback Pool
                â”‚
                â–¼
            Buyback $RAM on Raydium
                â”‚
                â–¼
            Burn or distribute to treasury
```

---

## ðŸ“ˆ Profit Routing Logic

### Default Split (Configurable via DAO)

```python
# Pseudocode
def route_profit(profit_amount: float):
    """
    Distributes profit according to strategy parameters
    """
    # Get current strategy (can be changed by governance)
    strategy = get_current_strategy()
    
    inventory_pct = strategy.get('inventory_allocation', 0.50)
    buyback_pct = strategy.get('buyback_allocation', 0.50)
    
    assert inventory_pct + buyback_pct == 1.0
    
    # Calculate allocations
    to_inventory = profit_amount * inventory_pct
    to_buyback = profit_amount * buyback_pct
    
    # Execute
    transfer_to_trading_pool(to_inventory)
    execute_buyback(to_buyback)
    
    # Log on-chain
    emit ProfitRouted(
        timestamp=now(),
        total=profit_amount,
        inventory=to_inventory,
        buyback=to_buyback,
        tx_hash=get_tx_hash()
    )
```

### Dynamic Rebalancing (Advanced)

**Scenario:** Market conditions change

```python
def dynamic_rebalancing():
    """
    Adjust split based on market conditions
    """
    ram_market_volatility = get_volatility('RAM')
    token_price_trend = get_price_trend('$RAM')
    
    if ram_market_volatility > 0.3:
        # High volatility â†’ reduce inventory exposure
        return {'inventory': 0.30, 'buyback': 0.70}
    
    elif token_price_trend < -0.2:
        # Token price falling â†’ more buybacks for support
        return {'inventory': 0.40, 'buyback': 0.60}
    
    else:
        # Normal conditions
        return {'inventory': 0.50, 'buyback': 0.50}
```

---

## ðŸ’³ Buyback Mechanism

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Token Buyback Process                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Buyback Pool reaches threshold ($500)
        â”‚
        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Calculate optimal     â”‚
    â”‚ execution strategy    â”‚
    â”‚                       â”‚
    â”‚ - Check liquidity     â”‚
    â”‚ - Minimize slippage   â”‚
    â”‚ - Avoid front-running â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Execute buy order     â”‚
    â”‚ on Raydium DEX        â”‚
    â”‚                       â”‚
    â”‚ USDC â†’ $RAM           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Tokens acquired       â”‚
    â”‚                       â”‚
    â”‚ Option A: Burn        â”‚
    â”‚ Option B: Treasury    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€> Option A: Send to burn address (0x000...dead)
            â”‚       â”‚
            â”‚       â–¼
            â”‚   Reduces circulating supply permanently
            â”‚
            â””â”€> Option B: Hold in treasury
                    â”‚
                    â–¼
                Can be used for:
                - Liquidity provision
                - Future distribution
                - Governance incentives
```

**Buyback Smart Contract:**
```solidity
contract BuybackEngine {
    using SafeMath for uint256;
    
    address constant BURN_ADDRESS = 0x000000000000000000000000000000000000dEaD;
    address ramToken = 0x...;
    address usdcToken = 0x...;
    
    uint256 public buybackThreshold = 500 * 1e6; // $500 USDC
    
    function executeBuyback() external {
        uint256 balance = IERC20(usdcToken).balanceOf(address(this));
        require(balance >= buybackThreshold, "Below threshold");
        
        // Swap USDC for $RAM via DEX router
        uint256 ramReceived = swapUSDCForRAM(balance);
        
        // Option 1: Burn
        IERC20(ramToken).transfer(BURN_ADDRESS, ramReceived);
        
        emit Buyback(balance, ramReceived, block.timestamp);
    }
}
```

---

## ðŸ“Š Treasury Accounting

### Double-Entry Ledger Example

| Date | Description | Debit | Credit | Balance |
|------|-------------|-------|--------|---------|
| 1/1  | Initial deposit | $10,000 | - | $10,000 |
| 1/5  | Purchase RAM | - | $1,200 | $8,800 |
| 1/5  | Inventory (asset) | $1,200 | - | - |
| 1/10 | Sell RAM | $1,650 | - | $10,450 |
| 1/10 | Remove inventory | - | $1,200 | - |
| 1/10 | **Realized Profit** | - | - | **$450** |
| 1/10 | Buyback allocation | - | $225 | $10,225 |
| 1/10 | Execute buyback | - | $225 | $10,000 |
| 1/10 | Reinvest allocation | - | $225 | $9,775 |
| 1/15 | Creator fees collected | $350 | - | $10,125 |

**Net Position:**
- Cash: $9,775
- Inventory: $225 (reinvested)
- Total: $10,000 + $450 profit - $450 distributed = $10,000

---

## ðŸ”’ Security Controls

### Multi-Signature Approval Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transaction Proposal                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Agent proposes trade > $5,000
        â”‚
        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Multi-sig Wallet      â”‚
    â”‚ 3-of-5 required       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€> Signer 1: âœ… Approved (mobile wallet)
            â”œâ”€> Signer 2: âœ… Approved (hardware wallet)
            â”œâ”€> Signer 3: âœ… Approved (mobile wallet)
            â”œâ”€> Signer 4: â¸ï¸  No response (optional)
            â””â”€> Signer 5: â¸ï¸  No response (optional)
                â”‚
                â–¼
            Threshold reached (3/5) âœ…
                â”‚
                â–¼
            Transaction executes
                â”‚
                â–¼
            All signers notified of execution
```

**Signers:**
1. Core team member (founder)
2. Community representative (elected)
3. Technical advisor
4. Legal counsel
5. Institutional investor (if applicable)

---

## ðŸ“‰ Risk Mitigation Reserves

### Reserve Fund Allocation

```
Total Treasury: $100,000

â”œâ”€ Trading Capital: $70,000 (70%)
â”‚   â””â”€> Used for RAM purchases
â”‚
â”œâ”€ Reserve Fund: $20,000 (20%)
â”‚   â”œâ”€> Emergency liquidity: $10,000
â”‚   â”œâ”€> Bad trade insurance: $5,000
â”‚   â””â”€> Operating expenses: $5,000
â”‚
â””â”€- Operational Buffer: $10,000 (10%)
    â”œâ”€> Gas fees: $2,000
    â”œâ”€> Marketplace fees: $3,000
    â”œâ”€> Shipping contingency: $3,000
    â””â”€> Miscellaneous: $2,000
```

---

## ðŸŽ¯ Performance Metrics

### Key Metrics Tracked

```python
class TreasuryMetrics:
    def __init__(self):
        self.total_fees_collected = 0
        self.total_ram_purchased = 0
        self.total_ram_sold = 0
        self.realized_profit = 0
        self.unrealized_profit = 0
        self.buybacks_executed = 0
        self.tokens_burned = 0
        
    def calculate_roi(self):
        """Return on Investment"""
        return (self.realized_profit / self.total_fees_collected) * 100
    
    def calculate_win_rate(self):
        """Percentage of profitable trades"""
        winning_trades = count_winning_trades()
        total_trades = count_total_trades()
        return (winning_trades / total_trades) * 100
    
    def calculate_sharpe_ratio(self):
        """Risk-adjusted returns"""
        avg_return = self.realized_profit / count_total_trades()
        std_dev = calculate_trade_volatility()
        risk_free_rate = 0.04  # 4% annual
        return (avg_return - risk_free_rate) / std_dev
```

---

## ðŸš¨ Emergency Procedures

### Circuit Breaker Triggers

```
IF any of these conditions met:
    â”œâ”€ 3 consecutive losing trades â†’ PAUSE_TRADING()
    â”œâ”€ Unrealized loss > 30% of inventory â†’ LIQUIDATE_INVENTORY()
    â”œâ”€ Treasury balance < $5,000 â†’ STOP_NEW_PURCHASES()
    â”œâ”€ Solana network congestion > 5000 TPS â†’ DELAY_TRANSACTIONS()
    â””â”€ Security breach detected â†’ FREEZE_WALLET()
        â”‚
        â–¼
    Notify all multi-sig signers immediately
        â”‚
        â–¼
    Require unanimous 5-of-5 approval to resume
```

---

## ðŸ“„ Audit Trail

Every transaction logged on-chain and in database:

```json
{
  "tx_hash": "5Xn2...",
  "timestamp": "2026-01-28T10:30:00Z",
  "type": "ram_purchase",
  "amount_usd": 1200,
  "marketplace": "newegg",
  "sku": "N82E16820242729",
  "approvers": ["signer1", "signer2", "signer3"],
  "agent_confidence": 0.87,
  "expected_profit": 450,
  "status": "completed"
}
```

**Public Dashboard:** All transactions viewable at `app.ramstrategy.io/transactions`

---

## Conclusion

The treasury flow is designed to be:
- âœ… **Transparent:** All flows visible on-chain
- âœ… **Secure:** Multi-sig protection
- âœ… **Efficient:** Automated where safe
- âœ… **Auditable:** Complete transaction history

For technical implementation, see `/src/treasury/` in the repository.

---

**Last Updated:** January 2026  
**Version:** 1.0
